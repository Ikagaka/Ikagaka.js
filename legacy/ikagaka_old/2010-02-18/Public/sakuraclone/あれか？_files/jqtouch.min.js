(function($){$.jQTouch=function(_2){var _3,$head=$("head"),hist=[],newPageCount=0,jQTSettings={},dumbLoop,currentPage;init(_2);function init(_4){var _5={addGlossToIcon:true,backSelector:".back, .cancel, .goback",fixedViewport:true,flipSelector:".flip",formSelector:"form",fullScreen:true,fullScreenClass:"fullscreen",icon:null,initializeTouch:"a, .touch",slideInSelector:"ul li a",slideUpSelector:".slideup",startupScreen:null,statusBar:"default",submitSelector:".submit"};jQTSettings=$.extend({},_5,_4);var _6;if(jQTSettings.preloadImages){for(var i=jQTSettings.preloadImages.length-1;i>=0;i--){(new Image()).src=jQTSettings.preloadImages[i];}}if(jQTSettings.icon){var _8=(jQTSettings.addGlossToIcon)?"":"-precomposed";_6+="<link rel=\"apple-touch-icon"+_8+"\" href=\""+jQTSettings.icon+"\" />";}if(jQTSettings.startupScreen){_6+="<link rel=\"apple-touch-startup-image\" href=\""+jQTSettings.startupScreen+"\" />";}if(jQTSettings.fixedViewport){_6+="<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;\"/>";}if(jQTSettings.fullScreen){_6+="<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />";if(jQTSettings.statusBar){_6+="<meta name=\"apple-mobile-web-app-status-bar-style\" content=\""+jQTSettings.statusBar+"\" />";}}if(_6){$head.append(_6);}var _9=[];if(jQTSettings.backSelector){_9.push(jQTSettings.backSelector);}if(jQTSettings.flipSelector){_9.push(jQTSettings.flipSelector);}if(jQTSettings.slideInSelector){_9.push(jQTSettings.slideInSelector);}if(jQTSettings.slideUpSelector){_9.push(jQTSettings.slideUpSelector);}if(_9.length>0){$(_9.join(", ")).live("click",function liveClick(){var _a=$(this);_a.addClass("active");if(_a.attr("target")=="_blank"){return true;}if(_a.is(jQTSettings.backSelector)){$.fn.unselect(_a);goBack();return false;}var _b="slideInOut";if(_a.is(jQTSettings.flipSelector)){_b="flip";}if(_a.is(jQTSettings.slideUpSelector)){_b="slideUp";}var _c=_a.attr("hash");if(_c&&_c!="#"){showPage($(_c),_b);}else{if(_a.attr("target")!="_blank"){_a.addClass("loading");showPageByHref(_a.attr("href"),null,null,null,_b,function(){_a.removeClass("loading");setTimeout($.fn.unselect,250,_a);});}else{_a.unselect();}}return false;});}$(document).ready(function(){_3=$("body");_3.bind("orientationchange",updateOrientation).trigger("orientationchange");if(jQTSettings.fullScreenClass&&window.navigator.standalone==true){_3.addClass(jQTSettings.fullScreenClass+" "+jQTSettings.statusBar);}if(jQTSettings.initializeTouch){$(jQTSettings.initializeTouch).addTouchHandlers();}$(jQTSettings.formSelector).submit(submitForm);if(jQTSettings.submitSelector){$(jQTSettings.submitSelector).click(submitParentForm);}if($("body > .current").length==0){currentPage=$("body > *:first");}else{currentPage=$("body > .current:first");$("body > .current").removeClass("current");}$(currentPage).addClass("current");location.hash=$(currentPage).attr("id");addPageToHistory(currentPage);window.scrollTo(0,0);dumbLoopStart();});}function addPageToHistory(_d,_e){var _f=_d.attr("id");hist.unshift({page:_d,transition:_e,id:_f});}function animatePages(_10,_11,_12,_13){if(_11.length==0){$.fn.unselect();console.log("Target element is missing.");return false;}window.scrollTo(0,0);var _14=function(_15){currentPage=_11;_10.removeClass("current");_11.trigger("pageTransitionEnd",{direction:"in"});_10.trigger("pageTransitionEnd",{direction:"out"});location.hash=$(currentPage).attr("id");$.fn.unselect();dumbLoopStart();};_10.trigger("pageTransitionStart",{direction:"out"});_11.trigger("pageTransitionStart",{direction:"in"});if(_12=="flip"){_11.flip({backwards:_13});_10.flip({backwards:_13,callback:_14});}else{if(_12=="slideUp"){if(_13){_11.addClass("current");_10.slideUpDown({backwards:_13,callback:_14});}else{_11.css("z-index",Number(_10.css("z-index"))+1);_11.slideUpDown({backwards:_13,callback:_14});}}else{_11.slideInOut({backwards:_13,callback:_14});_10.slideInOut({backwards:_13});}}return true;}function dumbLoopStart(){dumbLoop=setInterval(function(){if(location.hash==""){location.hash=$(currentPage).attr("id");}if(location.hash!="#"+$(currentPage).attr("id")){try{for(var i=1;i<hist.length;i++){if(location.hash=="#"+hist[i].id){foundBack=true;dumbLoopStop();goBack(i);}}}catch(e){}}},250);}function dumbLoopStop(){clearInterval(dumbLoop);}function goBack(_17){var _17=_17||1;var _18=hist[0].transition;var _19=hist[0].page;hist.splice(0,_17);var _1a=hist[0].page;animatePages(_19,_1a,_18,true);}function insertPages(_1b,_1c){var _1d;_1b.each(function(_1e,_1f){if(!$(this).attr("id")){$(this).attr("id",(++newPageCount));}$(this).appendTo(_3);if($(this).hasClass("current")||!_1d){_1d=$(this);}});if(_1d){showPage(_1d,_1c);}}function showPage(_20,_21){var _22=hist[0].page;if(animatePages(_22,_20,_21)){addPageToHistory(_20,_21);}}function showPageByHref(_23,_24,_25,_26,_27,cb){if(_23!="#"){$.ajax({url:_23,data:_24,type:_25||"GET",success:function(_29,_2a){insertPages($(_29),_27);if(cb){cb(true);}},error:function(_2b){$.fn.unselect();console.log("AJAX error");if(cb){cb(false);}}});}else{$.fn.unselect();}}function submitParentForm(){$(this).parent("form").submit();}function submitForm(){showPageByHref($(this).attr("action")||"POST",$(this).serialize(),$(this).attr("method"));return false;}function updateOrientation(){var _2c=window.innerWidth<window.innerHeight?"profile":"landscape";_3.removeClass("profile landscape").addClass(_2c).trigger("turn",{orientation:_2c});scrollTo(0,0);}};$.fn.flip=function(_2d){return this.each(function(){var _2e={direction:"toggle",backwards:false,callback:null};var _2f=$.extend({},_2e,_2d);var dir=((_2f.direction=="toggle"&&$(this).hasClass("current"))||_2f.direction=="out")?1:-1;if(dir==-1){$(this).addClass("current");}$(this).css({"-webkit-transform":"scale("+((dir==1)?"1":".8")+") rotateY("+((dir==1)?"0":(!_2f.backwards?"-":"")+"180")+"deg)"}).transition({"-webkit-transform":"scale("+((dir==1)?".8":"1")+") rotateY("+((dir==1)?(_2f.backwards?"-":"")+"180":"0")+"deg)"},{callback:_2f.callback,speed:"800ms"});});};$.fn.slideInOut=function(_31){var _32={direction:"toggle",backwards:false,callback:null};var _33=$.extend({},_32,_31);return this.each(function(){var dir=((_33.direction=="toggle"&&$(this).hasClass("current"))||_33.direction=="out")?1:-1;if(dir==-1){$(this).addClass("current").find("h1, .button").css("opacity",0).transition({"opacity":1}).end().css({"-webkit-transform":"translate3d("+(_33.backwards?-1:1)*window.innerWidth+"px, 0, 0)"}).transition({"-webkit-transform":"translate3d(0, 0, 0)"},{callback:_33.callback});}else{$(this).find("h1, .button").transition({"opacity":0}).end().transition({"-webkit-transform":"translate3d("+((_33.backwards?1:-1)*dir*window.innerWidth)+"px, 0, 0)"},{callback:_33.callback});}});};$.fn.slideUpDown=function(_35){var _36={direction:"toggle",backwards:false,callback:null};var _37=$.extend({},_36,_35);return this.each(function(){var dir=((_37.direction=="toggle"&&$(this).hasClass("current"))||_37.direction=="out")?1:-1;if(dir==-1){$(this).addClass("current").css({"-webkit-transform":"translate3d(0, "+(_37.backwards?-1:1)*window.innerHeight+"px, 0)"}).transition({"-webkit-transform":"translate3d(0, 0, 0)"},{callback:_37.callback}).find("h1, .button").css("opacity",0).transition({"opacity":1});}else{$(this).transition({"-webkit-transform":"translate3d(0, "+window.innerHeight+"px, 0)"},{callback:_37.callback}).find("h1, .button").transition({"opacity":0});}});};$.fn.transition=function(css,_3a){var $el=$(this);var _3c={speed:"300ms",callback:null,ease:"ease-in-out",};var _3d=$.extend({},_3c,_3a);if(_3d.speed===0){$el.css(css);window.setTimeout(callback,0);}else{if($.browser.safari){var s=[];for(var i in css){s.push(i);}$el.css({webkitTransitionProperty:s.join(", "),webkitTransitionDuration:_3d.speed,webkitTransitionTimingFunction:_3d.ease});if(_3d.callback){$el.one("webkitTransitionEnd",_3d.callback);}setTimeout(function(el){el.css(css);},0,$el);}else{$el.animate(css,_3d.speed,_3d.callback);}return this;}};$.fn.unselect=function(obj){if(obj){obj.removeClass("active");}else{$(".active").removeClass("active");}};})(jQuery);(function($){var _43={currentTouch:{},handleStart:function(e){_43.currentTouch={startX:event.changedTouches[0].clientX,startY:event.changedTouches[0].clientY,startTime:(new Date).getTime(),deltaX:0,deltaY:0,deltaT:0};$(this).addClass("active").bind("touchmove touchend",_43.handle);return true;},handle:function(e){var _46=event.changedTouches,first=_46[0]||null,type="";switch(event.type){case "touchmove":_43.currentTouch.deltaX=first.pageX-_43.currentTouch.startX;_43.currentTouch.deltaY=first.pageY-_43.currentTouch.startY;_43.currentTouch.deltaT=(new Date).getTime()-_43.currentTouch.startTime;if(Math.abs(_43.currentTouch.deltaX)>Math.abs(_43.currentTouch.deltaY)&&(_43.currentTouch.deltaX>35||_43.currentTouch.deltaX<-35)&&_43.currentTouch.deltaT<1000){$(this).trigger("swipe",{direction:(_43.currentTouch.deltaX<0)?"left":"right"}).unbind("touchmove touchend");}type="mousemove";break;case "touchend":if(!_43.currentTouch.deltaY&&!_43.currentTouch.deltaX){type="mouseup";$(this).trigger("tap");}else{$(this).removeClass("active");}$(this).unbind("touchmove touchend");delete currentTouch;break;}if(type!=""&&first){$(this).trigger(type);}}};$.fn.addTouchHandlers=function(){return this.each(function(i,el){$(el).bind("touchstart",_43.handleStart);});};})(jQuery);